@source "../{app,components,lib}";
@import "tailwindcss";
@import "tw-animate-css";

@custom-variant dark (&:is(.dark *));

@theme inline {
  /* ===== QDS Tailwind Theme ===== */

  /* Typography */
  --font-sans: var(--font-geist-sans);
  --font-mono: var(--font-geist-mono);

  /* Core Colors */
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --color-bg: var(--bg);
  --color-surface: var(--surface);
  --color-surface-2: var(--surface-2);
  --color-text: var(--text);
  --color-muted: var(--muted);

  /* Primary (Quokka Brown) */
  --color-primary: var(--primary);
  --color-primary-foreground: var(--primary-foreground);
  --color-primary-hover: var(--primary-hover);
  --color-primary-pressed: var(--primary-pressed);

  /* Secondary (Rottnest Olive) */
  --color-secondary: var(--secondary);
  --color-secondary-foreground: var(--secondary-foreground);
  --color-secondary-hover: var(--secondary-hover);
  --color-secondary-pressed: var(--secondary-pressed);

  /* Accent (Clear Sky) */
  --color-accent: var(--accent);
  --color-accent-foreground: var(--accent-foreground);
  --color-accent-hover: var(--accent-hover);
  --color-accent-pressed: var(--accent-pressed);

  /* Support Colors */
  --color-success: var(--success);
  --color-warning: var(--warning);
  --color-danger: var(--danger);
  --color-info: var(--info);
  --color-destructive: var(--destructive);
  --color-destructive-foreground: var(--destructive-foreground);

  /* Amber (Hero CTA) */
  --color-amber-50: var(--amber-50);
  --color-amber-100: var(--amber-100);
  --color-amber-200: var(--amber-200);
  --color-amber-300: var(--amber-300);
  --color-amber-400: var(--amber-400);
  --color-amber-500: var(--amber-500);
  --color-amber-600: var(--amber-600);
  --color-amber-700: var(--amber-700);
  --color-amber-800: var(--amber-800);
  --color-amber-900: var(--amber-900);

  /* Neutrals */
  --color-neutral-50: var(--neutral-50);
  --color-neutral-100: var(--neutral-100);
  --color-neutral-200: var(--neutral-200);
  --color-neutral-300: var(--neutral-300);
  --color-neutral-400: var(--neutral-400);
  --color-neutral-500: var(--neutral-500);
  --color-neutral-600: var(--neutral-600);
  --color-neutral-700: var(--neutral-700);
  --color-neutral-800: var(--neutral-800);
  --color-neutral-900: var(--neutral-900);
  --color-neutral-950: var(--neutral-950);

  /* Semantic Tokens */
  --color-card: var(--card);
  --color-card-foreground: var(--card-foreground);
  --color-popover: var(--popover);
  --color-popover-foreground: var(--popover-foreground);
  --color-muted-foreground: var(--muted-foreground);
  --color-border: var(--border);
  --color-input: var(--input);
  --color-ring: var(--ring);

  /* Charts (Data Visualization) */
  --color-chart-1: var(--chart-1);
  --color-chart-2: var(--chart-2);
  --color-chart-3: var(--chart-3);
  --color-chart-4: var(--chart-4);
  --color-chart-5: var(--chart-5);

  /* AI Colors */
  --color-ai-purple: #8B5CF6;
  --color-ai-indigo: #6366F1;
  --color-ai-cyan: #06B6D4;
  --color-ai-purple-50: var(--ai-purple-50);
  --color-ai-purple-100: var(--ai-purple-100);
  --color-ai-purple-200: var(--ai-purple-200);
  --color-ai-purple-300: var(--ai-purple-300);
  --color-ai-purple-400: var(--ai-purple-400);
  --color-ai-purple-500: var(--ai-purple-500);
  --color-ai-purple-600: var(--ai-purple-600);
  --color-ai-purple-700: var(--ai-purple-700);
  --color-ai-purple-800: var(--ai-purple-800);
  --color-ai-purple-900: var(--ai-purple-900);

  /* Sidebar */
  --color-sidebar: var(--sidebar);
  --color-sidebar-foreground: var(--sidebar-foreground);
  --color-sidebar-primary: var(--sidebar-primary);
  --color-sidebar-primary-foreground: var(--sidebar-primary-foreground);
  --color-sidebar-accent: var(--sidebar-accent);
  --color-sidebar-accent-foreground: var(--sidebar-accent-foreground);
  --color-sidebar-border: var(--sidebar-border);
  --color-sidebar-ring: var(--sidebar-ring);

  /* Border Radius (QDS Scale) */
  --radius-sm: var(--radius-sm);
  --radius-md: var(--radius-md);
  --radius-lg: var(--radius-lg);
  --radius-xl: var(--radius-xl);
  --radius-2xl: var(--radius-2xl);

  /* Box Shadows (QDS Elevation) */
  --shadow-e1: var(--shadow-e1);
  --shadow-e2: var(--shadow-e2);
  --shadow-e3: var(--shadow-e3);

  /* Glow Shadows (for interactive elements) */
  --shadow-glow-primary: var(--shadow-glow-primary);
  --shadow-glow-secondary: var(--shadow-glow-secondary);
  --shadow-glow-accent: var(--shadow-glow-accent);
  --shadow-glow-success: var(--shadow-glow-success);
  --shadow-glow-warning: var(--shadow-glow-warning);

  /* Glassmorphism Tokens */
  --color-glass-ultra: var(--glass-ultra);
  --color-glass-strong: var(--glass-strong);
  --color-glass-medium: var(--glass-medium);
  --color-glass-subtle: var(--glass-subtle);
  --color-border-glass: var(--border-glass);
}

/* ========================================
   QUOKKA DESIGN SYSTEM (QDS) v1.0
   Warm, approachable, academic-grade
   ======================================== */

:root {
  /* ===== Core Palette (Light Theme) ===== */
  --bg: #FFFFFF;
  --surface: #FFFFFF;
  --surface-2: #F7F5F2;
  --text: #2A2721;
  --muted: #625C52;

  /* Primary (Quokka Brown) */
  --primary: #8A6B3D;
  --primary-contrast: #FFFFFF;
  --primary-hover: #6F522C;
  --primary-pressed: #5C4525;

  /* Secondary (Rottnest Olive) */
  --secondary: #5E7D4A;
  --secondary-hover: #556B3B;
  --secondary-pressed: #485B33;

  /* Accent (Clear Sky) */
  --accent: #2D6CDF;
  --accent-hover: #1F5CC0;
  --accent-pressed: #1847A1;

  /* Support Colors */
  --success: #2E7D32;
  --warning: #B45309;
  --danger: #D92D20;
  --info: #2563EB;

  /* Amber (Hero CTA Brand Color) */
  --amber-50: #FFFBEB;
  --amber-100: #FEF3C7;
  --amber-200: #FDE68A;
  --amber-300: #FCD34D;
  --amber-400: #FBBF24;
  --amber-500: #F59E0B;
  --amber-600: #D97706;
  --amber-700: #B45309;
  --amber-800: #92400E;
  --amber-900: #78350F;

  /* Neutrals (Warm Gray) */
  --neutral-50: #F7F5F2;
  --neutral-100: #E9E4DC;
  --neutral-200: #CDC7BD;
  --neutral-300: #A49E94;
  --neutral-400: #7E786E;
  --neutral-500: #625C52;
  --neutral-600: #4B463D;
  --neutral-700: #3A362E;
  --neutral-800: #2A2721;
  --neutral-900: #171511;
  --neutral-950: #0F0E0C;

  /* ===== Semantic Tokens ===== */
  --background: var(--bg);
  --foreground: var(--text);
  --card: var(--surface);
  --card-foreground: var(--text);
  --popover: var(--surface);
  --popover-foreground: var(--text);
  --primary-foreground: var(--primary-contrast);
  --secondary-foreground: #FFFFFF;
  --muted-foreground: var(--muted);
  --accent-foreground: #FFFFFF;
  --destructive: var(--danger);
  --destructive-foreground: #FFFFFF;
  --border: var(--neutral-200);
  --input: var(--neutral-200);
  --ring: var(--accent);

  /* ===== Border Radius (QDS Scale) ===== */
  --radius-sm: 6px;
  --radius-md: 10px;
  --radius-lg: 16px;
  --radius-xl: 20px;
  --radius-2xl: 24px;
  --radius: var(--radius-lg);

  /* ===== Elevation (Shadows) ===== */
  --shadow-e1: 0 1px 2px rgba(15, 14, 12, 0.06);
  --shadow-e2: 0 2px 8px rgba(15, 14, 12, 0.08);
  --shadow-e3: 0 8px 24px rgba(15, 14, 12, 0.10);

  /* ===== Glassmorphism System ===== */

  /* Glass Surface Backgrounds */
  --glass-ultra: rgba(255, 255, 255, 0.4);
  --glass-strong: rgba(255, 255, 255, 0.6);
  --glass-medium: rgba(255, 255, 255, 0.7);
  --glass-subtle: rgba(255, 255, 255, 0.85);

  /* Backdrop Blur Scale */
  --blur-xs: 4px;
  --blur-sm: 8px;
  --blur-md: 12px;
  --blur-lg: 16px;
  --blur-xl: 24px;
  --blur-2xl: 32px;

  /* Glass Borders & Glows */
  --border-glass: rgba(255, 255, 255, 0.18);
  --shadow-glow-primary: 0 0 20px rgba(138, 107, 61, 0.15);
  --shadow-glow-secondary: 0 0 20px rgba(94, 125, 74, 0.15);
  --shadow-glow-accent: 0 0 20px rgba(45, 108, 223, 0.15);
  --shadow-glow-success: 0 0 20px rgba(46, 125, 50, 0.15);
  --shadow-glow-warning: 0 0 20px rgba(180, 83, 9, 0.15);

  /* Glass Shadows (Softer, Diffuse) */
  --shadow-glass-sm: 0 2px 16px rgba(15, 14, 12, 0.04);
  --shadow-glass-md: 0 4px 24px rgba(15, 14, 12, 0.06);
  --shadow-glass-lg: 0 8px 32px rgba(15, 14, 12, 0.08);

  /* Liquid Gradients */
  --liquid-gradient-1: linear-gradient(135deg, rgba(138,107,61,0.1) 0%, rgba(94,125,74,0.1) 100%);
  --liquid-gradient-2: linear-gradient(135deg, rgba(45,108,223,0.08) 0%, rgba(139,92,246,0.08) 100%);
  --liquid-mesh: radial-gradient(at 40% 20%, rgba(138,107,61,0.15) 0px, transparent 50%),
                 radial-gradient(at 80% 80%, rgba(94,125,74,0.12) 0px, transparent 50%);

  /* ===== AI-Specific Shadows (Purple Glow) ===== */
  --shadow-ai-sm: 0 1px 2px rgba(139, 92, 246, 0.08), 0 2px 8px rgba(139, 92, 246, 0.06);
  --shadow-ai-md: 0 4px 12px rgba(139, 92, 246, 0.15), 0 2px 4px rgba(139, 92, 246, 0.1);
  --shadow-ai-lg: 0 8px 24px rgba(139, 92, 246, 0.25), 0 4px 8px rgba(139, 92, 246, 0.15);

  /* ===== Warm Shadows (Human Content) ===== */
  --shadow-warm: 0 2px 8px rgba(138, 107, 61, 0.08);

  /* ===== AI Color Palette (Purple-Cyan Spectrum) ===== */
  --ai-purple-50: #FAF5FF;
  --ai-purple-100: #F3E8FF;
  --ai-purple-200: #E9D5FF;
  --ai-purple-300: #D8B4FE;
  --ai-purple-400: #C084FC;
  --ai-purple-500: #A855F7;
  --ai-purple-600: #9333EA;
  --ai-purple-700: #7E22CE;
  --ai-purple-800: #6B21A8;
  --ai-purple-900: #581C87;
  --ai-purple-950: #3B0764;

  --ai-indigo-50: #EEF2FF;
  --ai-indigo-100: #E0E7FF;
  --ai-indigo-200: #C7D2FE;
  --ai-indigo-300: #A5B4FC;
  --ai-indigo-400: #818CF8;
  --ai-indigo-500: #6366F1;
  --ai-indigo-600: #4F46E5;
  --ai-indigo-700: #4338CA;
  --ai-indigo-800: #3730A3;
  --ai-indigo-900: #312E81;
  --ai-indigo-950: #1E1B4B;

  --ai-cyan-50: #ECFEFF;
  --ai-cyan-100: #CFFAFE;
  --ai-cyan-200: #A5F3FC;
  --ai-cyan-300: #67E8F9;
  --ai-cyan-400: #22D3EE;
  --ai-cyan-500: #06B6D4;
  --ai-cyan-600: #0891B2;
  --ai-cyan-700: #0E7490;
  --ai-cyan-800: #155E75;
  --ai-cyan-900: #164E63;
  --ai-cyan-950: #083344;

  /* ===== AI Gradients ===== */
  --ai-gradient-primary: linear-gradient(135deg, #6366F1 0%, #8B5CF6 50%, #06B6D4 100%);
  --ai-gradient-accent: linear-gradient(135deg, #3B82F6 0%, #8B5CF6 100%);
  --ai-gradient-subtle: linear-gradient(135deg, rgba(99, 102, 241, 0.1) 0%, rgba(139, 92, 246, 0.1) 50%, rgba(6, 182, 212, 0.1) 100%);
  --ai-gradient-border: linear-gradient(180deg, #6366F1 0%, #8B5CF6 50%, #06B6D4 100%);

  /* ===== Charts (Data Viz) ===== */
  --chart-1: #5E7D4A; /* Olive 500 */
  --chart-2: #2D6CDF; /* Sky 500 */
  --chart-3: #8A6B3D; /* Tawny 500 */
  --chart-4: #96B380; /* Olive 300 */
  --chart-5: #86A9F6; /* Sky 300 */

  /* ===== Status Badges ===== */
  --status-open-bg: 38 60% 92%;           /* warning/20 equivalent */
  --status-open-text: 38 95% 40%;         /* warning dark */
  --status-open-border: 38 80% 75%;       /* warning light */

  --status-answered-bg: 217 65% 92%;      /* accent/20 equivalent */
  --status-answered-text: 217 75% 45%;    /* accent dark */
  --status-answered-border: 217 70% 75%;  /* accent light */

  --status-resolved-bg: 122 40% 92%;      /* success/20 equivalent */
  --status-resolved-text: 122 50% 30%;    /* success dark */
  --status-resolved-border: 122 45% 70%;  /* success light */

  /* ===== Avatar & UI Elements ===== */
  --avatar-bg: 35 40% 92%;                /* primary/20 equivalent */
  --avatar-text: 35 45% 35%;              /* primary dark */

  --text-subtle: 35 8% 45%;               /* Darkened for WCAG AA contrast (4.5:1+) */

  /* ===== Sidebar ===== */
  --sidebar: var(--surface-2);
  --sidebar-foreground: var(--text);
  --sidebar-primary: var(--primary);
  --sidebar-primary-foreground: var(--primary-contrast);
  --sidebar-accent: var(--secondary);
  --sidebar-accent-foreground: #FFFFFF;
  --sidebar-border: var(--neutral-200);
  --sidebar-ring: var(--accent);
}

.dark {
  /* ===== Core Palette (Dark Theme) ===== */
  --bg: #12110F;
  --surface: #171511;
  --surface-2: #1F1C17;
  --text: #F3EFE8;
  --muted: #B8AEA3;

  /* Primary (Quokka Brown - Lighter) */
  --primary: #C1A576;
  --primary-contrast: #2A2721;
  --primary-hover: #D8C193;
  --primary-pressed: #EAD8B6;

  /* Secondary (Rottnest Olive - Lighter) */
  --secondary: #96B380;
  --secondary-hover: #B8CEA3;
  --secondary-pressed: #D8E6C8;

  /* Accent (Clear Sky - Lighter) */
  --accent: #86A9F6;
  --accent-hover: #2D6CDF;
  --accent-pressed: #1F5CC0;

  /* Support Colors (unchanged) */
  --success: #2E7D32;
  --warning: #B45309;
  --danger: #D92D20;
  --info: #2563EB;

  /* ===== Semantic Tokens (Dark) ===== */
  --background: var(--bg);
  --foreground: var(--text);
  --card: var(--surface);
  --card-foreground: var(--text);
  --popover: var(--surface);
  --popover-foreground: var(--text);
  --primary-foreground: var(--primary-contrast);
  --secondary-foreground: var(--primary-contrast);
  --muted-foreground: var(--muted);
  --accent-foreground: var(--primary-contrast);
  --destructive: var(--danger);
  --destructive-foreground: #FFFFFF;
  --border: rgba(243, 239, 232, 0.1);
  --input: rgba(243, 239, 232, 0.15);
  --ring: var(--accent);

  /* ===== Elevation (Dark Shadows) ===== */
  --shadow-e1: 0 1px 2px rgba(0, 0, 0, 0.3);
  --shadow-e2: 0 2px 8px rgba(0, 0, 0, 0.4);
  --shadow-e3: 0 8px 24px rgba(0, 0, 0, 0.5);

  /* ===== Glassmorphism System (Dark) ===== */

  /* Glass Surface Backgrounds */
  --glass-ultra: rgba(23, 21, 17, 0.4);
  --glass-strong: rgba(23, 21, 17, 0.6);
  --glass-medium: rgba(23, 21, 17, 0.7);
  --glass-subtle: rgba(23, 21, 17, 0.85);

  /* Glass Borders & Glows */
  --border-glass: rgba(255, 255, 255, 0.08);
  --shadow-glow-primary: 0 0 24px rgba(193, 165, 118, 0.2);
  --shadow-glow-secondary: 0 0 24px rgba(150, 179, 128, 0.2);
  --shadow-glow-accent: 0 0 24px rgba(134, 169, 246, 0.2);
  --shadow-glow-success: 0 0 24px rgba(46, 125, 50, 0.2);
  --shadow-glow-warning: 0 0 24px rgba(180, 83, 9, 0.2);

  /* Glass Shadows (Dark) */
  --shadow-glass-sm: 0 2px 16px rgba(0, 0, 0, 0.2);
  --shadow-glass-md: 0 4px 24px rgba(0, 0, 0, 0.3);
  --shadow-glass-lg: 0 8px 32px rgba(0, 0, 0, 0.4);

  /* Liquid Gradients (Dark) */
  --liquid-gradient-1: linear-gradient(135deg, rgba(193,165,118,0.12) 0%, rgba(150,179,128,0.12) 100%);
  --liquid-gradient-2: linear-gradient(135deg, rgba(134,169,246,0.1) 0%, rgba(168,85,247,0.1) 100%);
  --liquid-mesh: radial-gradient(at 40% 20%, rgba(193,165,118,0.18) 0px, transparent 50%),
                 radial-gradient(at 80% 80%, rgba(150,179,128,0.15) 0px, transparent 50%);

  /* ===== AI Shadows (Dark Mode) ===== */
  --shadow-ai-sm: 0 1px 2px rgba(168, 85, 247, 0.15), 0 2px 8px rgba(168, 85, 247, 0.1);
  --shadow-ai-md: 0 4px 12px rgba(168, 85, 247, 0.25), 0 2px 4px rgba(168, 85, 247, 0.15);
  --shadow-ai-lg: 0 8px 24px rgba(168, 85, 247, 0.35), 0 4px 8px rgba(168, 85, 247, 0.2);

  --shadow-warm: 0 2px 8px rgba(193, 165, 118, 0.12);

  /* ===== Charts (Dark Theme) ===== */
  --chart-1: #96B380; /* Olive 300 */
  --chart-2: #86A9F6; /* Sky 300 */
  --chart-3: #C1A576; /* Tawny 300 */
  --chart-4: #5E7D4A; /* Olive 500 */
  --chart-5: #2D6CDF; /* Sky 500 */

  /* ===== Status Badges (Dark) ===== */
  --status-open-bg: 38 50% 18%;           /* warning dark bg */
  --status-open-text: 38 85% 70%;         /* warning light text */
  --status-open-border: 38 60% 35%;       /* warning dark border */

  --status-answered-bg: 217 55% 20%;      /* accent dark bg */
  --status-answered-text: 217 75% 75%;    /* accent light text */
  --status-answered-border: 217 60% 40%;  /* accent dark border */

  --status-resolved-bg: 122 40% 18%;      /* success dark bg */
  --status-resolved-text: 122 45% 70%;    /* success light text */
  --status-resolved-border: 122 40% 35%;  /* success dark border */

  /* ===== Avatar & UI Elements (Dark) ===== */
  --avatar-bg: 35 30% 22%;                /* primary dark bg */
  --avatar-text: 35 35% 65%;              /* primary light text */

  --text-subtle: 35 10% 65%;              /* subtle text for dark */

  /* ===== Sidebar (Dark) ===== */
  --sidebar: var(--surface);
  --sidebar-foreground: var(--text);
  --sidebar-primary: var(--primary);
  --sidebar-primary-foreground: var(--primary-contrast);
  --sidebar-accent: var(--secondary);
  --sidebar-accent-foreground: var(--primary-contrast);
  --sidebar-border: rgba(243, 239, 232, 0.1);
  --sidebar-ring: var(--accent);
}

@layer base {
  * {
    @apply border-border;
  }

  *:focus-visible {
    @apply outline-2 outline-offset-2 outline-ring;
    box-shadow: 0 0 0 4px rgba(45, 108, 223, 0.3);
  }

  .dark *:focus-visible {
    box-shadow: 0 0 0 4px rgba(134, 169, 246, 0.4);
  }

  /* Enhanced focus for glass backgrounds */
  .glass-panel *:focus-visible,
  .glass-panel-strong *:focus-visible,
  .glass-overlay *:focus-visible {
    box-shadow: 0 0 0 4px rgba(45, 108, 223, 0.5);
  }

  .dark .glass-panel *:focus-visible,
  .dark .glass-panel-strong *:focus-visible,
  .dark .glass-overlay *:focus-visible {
    box-shadow: 0 0 0 4px rgba(134, 169, 246, 0.6);
  }

  body {
    @apply bg-background text-foreground antialiased;
  }
}

/* ===== Enhanced Spacing Utilities ===== */
@layer utilities {
  .section-spacing {
    @apply py-12 md:py-16;
  }

  .card-spacing {
    @apply p-6;
  }

  .tight-spacing {
    @apply space-y-3;
  }

  .comfortable-spacing {
    @apply space-y-6;
  }

  .generous-spacing {
    @apply space-y-8;
  }

  /* Glass Text Shadow for Readability */
  .glass-text {
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
  }

  .dark .glass-text {
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
  }

  /* Typography Hierarchy Utilities */
  .heading-1 {
    @apply text-4xl md:text-5xl lg:text-6xl font-bold leading-tight tracking-tight;
  }

  .heading-2 {
    @apply text-3xl md:text-4xl font-bold leading-tight;
  }

  .heading-3 {
    @apply text-2xl md:text-3xl font-bold leading-snug;
  }

  .heading-4 {
    @apply text-xl md:text-2xl font-semibold leading-snug;
  }

  .heading-5 {
    @apply text-lg md:text-xl font-semibold leading-normal;
  }

  /* Hero Section Utilities */
  .hero-title {
    @apply text-5xl md:text-6xl lg:text-7xl font-bold leading-tight tracking-tight;
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
  }

  .dark .hero-title {
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
  }

  .hero-subtitle {
    @apply text-lg md:text-xl lg:text-2xl text-muted-foreground leading-relaxed;
  }

  /* Container Utilities */
  .container-narrow {
    @apply max-w-4xl mx-auto;
  }

  .container-wide {
    @apply max-w-6xl mx-auto;
  }

  .container-full {
    @apply max-w-7xl mx-auto;
  }

  /* Status Badge Utilities */
  .status-open {
    @apply bg-[hsl(var(--status-open-bg))] text-[hsl(var(--status-open-text))] border border-[hsl(var(--status-open-border))];
  }

  .status-answered {
    @apply bg-[hsl(var(--status-answered-bg))] text-[hsl(var(--status-answered-text))] border border-[hsl(var(--status-answered-border))];
  }

  .status-resolved {
    @apply bg-[hsl(var(--status-resolved-bg))] text-[hsl(var(--status-resolved-text))] border border-[hsl(var(--status-resolved-border))];
  }

  /* Status Online (for FloatingQuokka and real-time indicators) */
  .status-online {
    @apply bg-[hsl(122_40%_92%)] text-[hsl(122_50%_30%)] border border-[hsl(122_45%_70%)];
  }

  .dark .status-online {
    @apply bg-[hsl(122_40%_18%)] text-[hsl(122_45%_70%)] border border-[hsl(122_40%_35%)];
  }

  /* Avatar Utilities */
  .avatar-placeholder {
    @apply bg-[hsl(var(--avatar-bg))] text-[hsl(var(--avatar-text))];
  }

  /* Message Bubble Utilities */
  .message-user {
    @apply backdrop-blur-md bg-accent/90 text-accent-foreground border border-accent/30 shadow-[var(--shadow-glass-sm)] rounded-2xl;
  }

  .message-assistant {
    @apply backdrop-blur-md bg-glass-strong border border-[var(--border-glass)] shadow-[var(--shadow-glass-sm)] text-foreground rounded-2xl;
  }

  /* Text Utilities */
  .text-subtle {
    @apply text-[hsl(var(--text-subtle))];
  }

  /* AI Visual Identity Utilities */
  .ai-gradient {
    background: var(--ai-gradient-primary);
  }

  .ai-gradient-text {
    background: var(--ai-gradient-primary);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }

  .ai-glow {
    box-shadow: var(--shadow-ai-md);
  }

  .ai-glow:hover {
    box-shadow: var(--shadow-ai-lg);
  }

  /* ===== Accessibility Utilities ===== */

  /* Screen Reader Only - Visually Hidden but Accessible */
  .sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border-width: 0;
  }

  /* Focus-visible override for skip links */
  .focus\:not-sr-only:focus {
    position: static;
    width: auto;
    height: auto;
    padding: inherit;
    margin: inherit;
    overflow: visible;
    clip: auto;
    white-space: normal;
  }

  /* Glass Border Utility */
  .border-glass {
    border-color: var(--border-glass);
  }

  .hover\:border-glass:hover {
    border-color: var(--border-glass);
  }

  .focus\:border-glass:focus {
    border-color: var(--border-glass);
  }
}

/* ===== AI-First Animation System ===== */
@keyframes shimmer {
  0% { background-position: -200% center; }
  100% { background-position: 200% center; }
}

@keyframes pulse-glow {
  0%, 100% {
    box-shadow: 0 0 20px rgba(139, 92, 246, 0.3);
  }
  50% {
    box-shadow: 0 0 30px rgba(139, 92, 246, 0.6);
  }
}

@keyframes float {
  0%, 100% {
    transform: translateY(0px);
  }
  50% {
    transform: translateY(-4px);
  }
}

@keyframes gradient-shift {
  0% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
}

/* ===== AI Utility Classes ===== */
.animate-shimmer {
  background-size: 200% 100%;
  animation: shimmer 2s linear infinite;
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

.animate-float {
  animation: float 3s ease-in-out infinite;
}

.animate-gradient {
  background-size: 200% 200%;
  animation: gradient-shift 3s ease infinite;
}

.gradient-text {
  background: var(--ai-gradient-primary);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

.gradient-border {
  position: relative;
  background: var(--card);
}

.gradient-border::before {
  content: '';
  position: absolute;
  inset: 0;
  border-radius: inherit;
  padding: 2px;
  background: var(--ai-gradient-border);
  -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
  -webkit-mask-composite: xor;
  mask-composite: exclude;
}

/* ===== Hover Effects ===== */
.hover-lift {
  transition: all 250ms cubic-bezier(0.4, 0.0, 0.2, 1);
}

.hover-lift:hover {
  transform: translateY(-4px);
}

/* ===== Glassmorphism Utilities ===== */
.glass-panel {
  backdrop-filter: blur(var(--blur-md));
  background: var(--glass-medium);
  border: 1px solid var(--border-glass);
  box-shadow: var(--shadow-glass-md);
}

.glass-panel-strong {
  backdrop-filter: blur(var(--blur-lg));
  background: var(--glass-strong);
  border: 1px solid var(--border-glass);
  box-shadow: var(--shadow-glass-lg);
}

.glass-overlay {
  backdrop-filter: blur(var(--blur-xl)) saturate(150%);
  background: var(--glass-strong);
  border: 1px solid var(--border-glass);
}

.liquid-border {
  position: relative;
  border: 1px solid transparent;
  background: linear-gradient(var(--card), var(--card)) padding-box,
              var(--liquid-gradient-2) border-box;
}

/* Stronger shadow for glass-strong backgrounds */
@supports (backdrop-filter: blur(1px)) {
  .glass-panel-strong .glass-text,
  .glass-strong .glass-text {
    text-shadow: 0 1px 3px rgba(0, 0, 0, 0.15);
  }

  .dark .glass-panel-strong .glass-text,
  .dark .glass-strong .glass-text {
    text-shadow: 0 1px 3px rgba(0, 0, 0, 0.4);
  }
}

/* Fallback for browsers without backdrop-filter */
@supports not (backdrop-filter: blur(1px)) {
  .glass-panel,
  .glass-panel-strong,
  .glass-overlay {
    background: var(--card);
    border: 1px solid var(--border);
    backdrop-filter: none;
  }
}

/* ===== Liquid Morphing Animations ===== */
@keyframes liquid-morph {
  0%, 100% {
    border-radius: 60% 40% 30% 70% / 60% 30% 70% 40%;
  }
  50% {
    border-radius: 30% 60% 70% 40% / 50% 60% 30% 60%;
  }
}

@keyframes liquid-float {
  0%, 100% {
    transform: translateY(0px) scale(1);
  }
  50% {
    transform: translateY(-8px) scale(1.02);
  }
}

@keyframes glass-shimmer {
  0% {
    background-position: -200% center;
  }
  100% {
    background-position: 200% center;
  }
}

.animate-liquid {
  animation: liquid-morph 8s ease-in-out infinite;
}

.animate-liquid-float {
  animation: liquid-float 4s ease-in-out infinite;
}

.animate-glass-shimmer {
  background-size: 200% 100%;
  animation: glass-shimmer 3s linear infinite;
}

/* ===== Performance Optimizations ===== */
.glass-panel,
.glass-panel-strong,
.glass-overlay {
  will-change: backdrop-filter;
  contain: layout style paint;
  transform: translateZ(0);
}

/* Layer management for performance */
.glass-layer-1 {
  backdrop-filter: blur(var(--blur-sm));
  z-index: 1;
}

.glass-layer-2 {
  backdrop-filter: blur(var(--blur-md));
  z-index: 2;
}

.glass-layer-3 {
  backdrop-filter: blur(var(--blur-lg));
  z-index: 3;
}

/* ===== Confidence Meter Utilities ===== */
.confidence-track {
  @apply w-full h-2 rounded-full bg-muted/20 overflow-hidden;
}

.confidence-bar-high {
  @apply h-full bg-success rounded-full transition-all duration-300;
}

.confidence-bar-medium {
  @apply h-full bg-warning rounded-full transition-all duration-300;
}

.confidence-bar-low {
  @apply h-full bg-danger rounded-full transition-all duration-300;
}

/* Confidence text colors */
.confidence-text-high {
  @apply text-success font-semibold;
}

.confidence-text-medium {
  @apply text-warning font-semibold;
}

.confidence-text-low {
  @apply text-danger font-semibold;
}

/* ===== Custom Scrollbar Styling for Sidebars ===== */
.sidebar-scroll::-webkit-scrollbar {
  width: 8px;
}

.sidebar-scroll::-webkit-scrollbar-track {
  background: color-mix(in srgb, var(--glass-subtle) 50%, transparent);
  border-radius: 4px;
}

.sidebar-scroll::-webkit-scrollbar-thumb {
  background: color-mix(in srgb, var(--glass-medium) 70%, transparent);
  border-radius: 4px;
  transition: background 0.2s ease;
}

.sidebar-scroll::-webkit-scrollbar-thumb:hover {
  background: color-mix(in srgb, var(--glass-strong) 80%, transparent);
}

/* Firefox scrollbar styling */
.sidebar-scroll {
  scrollbar-width: thin;
  scrollbar-color: color-mix(in srgb, var(--glass-medium) 70%, transparent) color-mix(in srgb, var(--glass-subtle) 50%, transparent);
}

/* ===== Reduced Motion Support ===== */
@media (prefers-reduced-motion: reduce) {
  .liquid-border,
  .animate-liquid,
  .animate-liquid-float,
  .animate-glass-shimmer,
  .glass-panel,
  .glass-panel-strong {
    animation: none !important;
    transition: none !important;
  }
}
